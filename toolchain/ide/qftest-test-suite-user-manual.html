

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>QfTest Test Suite User Manual &mdash; GNU Toolchain for ARC User Manual 2017.03 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="GNU Toolchain for ARC User Manual 2017.03 documentation" href="../index.html"/>
        <link rel="up" title="ARC GNU IDE" href="index.html"/>
        <link rel="next" title="Information for Toolchain maintainers" href="../maintainer/index.html"/>
        <link rel="prev" title="How to Run embARC Projects" href="how-to-run-embarc-project.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GNU Toolchain for ARC User Manual
          

          
          </a>

          
            
            
              <div class="version">
                2017.03
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../baremetal/index.html">Building baremetal applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../baremetal/index.html#debugging-baremetal-applications">Debugging baremetal applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">Linux applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/index.html">Other</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ARC GNU IDE</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#creating-and-building-an-application">Creating and building an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#debugging">Debugging</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#miscellaneous">Miscellaneous</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="creating-eclipse-plugins-release-zip-file.html">Creating Eclipse plugins release zip file</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-to-run-embarc-project.html">How to Run embARC Projects</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">QfTest Test Suite User Manual</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#qf-test-installation">Qf-Test Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workflow">Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-test-suite-parameters">Setting test-suite parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launching-test-suite-from-command-line">Launching test-suite from command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#known-problems-and-how-to-fix-them">Known problems and how to fix them</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Information for Toolchain maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">GNU Toolchain for ARC User Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">ARC GNU IDE</a> &raquo;</li>
      
    <li>QfTest Test Suite User Manual</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/ide/qftest-test-suite-user-manual.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qftest-test-suite-user-manual">
<h1>QfTest Test Suite User Manual<a class="headerlink" href="#qftest-test-suite-user-manual" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#qf-test-installation" id="id1">Qf-Test Installation</a></li>
<li><a class="reference internal" href="#workflow" id="id2">Workflow</a></li>
<li><a class="reference internal" href="#setting-test-suite-parameters" id="id3">Setting test-suite parameters</a><ul>
<li><a class="reference internal" href="#optional-fields-for-all-tests" id="id4">Optional fields for all tests:</a></li>
<li><a class="reference internal" href="#nsim-parameters" id="id5">nSIM parameters</a></li>
<li><a class="reference internal" href="#emsk-and-axs10x-parameters-optional" id="id6">EMSK and AXS10x parameters (optional)</a></li>
<li><a class="reference internal" href="#openocd-and-ashling-parameters" id="id7">OpenOCD and Ashling parameters</a></li>
<li><a class="reference internal" href="#other-parameters" id="id8">Other parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#launching-test-suite-from-command-line" id="id9">Launching test-suite from command line</a></li>
<li><a class="reference internal" href="#known-problems-and-how-to-fix-them" id="id10">Known problems and how to fix them</a></li>
</ul>
</div>
<div class="section" id="qf-test-installation">
<h2><a class="toc-backref" href="#id1">Qf-Test Installation</a><a class="headerlink" href="#qf-test-installation" title="Permalink to this headline">¶</a></h2>
<p>Information about Qf-Test installation may be found
<a class="reference external" href="http://sp-sg/sites/arc_automation/SitePages/QF-Test/Users.aspx">here</a>.</p>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id2">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Open <strong>project_templates_tests.qft</strong> test-suite in Qf-Test.</p>
</li>
<li><p class="first">Connect your board to your computer, choose the core, configure drivers (for
OpenOCD on Windows).</p>
</li>
<li><p class="first">Set test-suite parameters for your test run (board, core, gdbServer and
other options).</p>
</li>
<li><p class="first">Set debugger behaviour in &#8220;Debugger/Options&#8221; menu. You can set &#8220;Break on
uncaught exceptions&#8221; option and then your test-run will stop if uncaught
exception has been thrown. When on pause you can investigate what caused the
exception in the run-log and edit test-suite commands if necessary, then
continue if you&#8217;ve fixed the problem. Similarly if you set &#8220;Break on
error/warning/caught exception&#8221; test run will stop in these cases. However, if
you want to just run all the test in succession without breaking, unset all
these options. You can also set breakpoints on some nodes.</p>
<p>For more information about debugger read Qf-Test manual.</p>
</li>
<li><p class="first">Start test run (press <strong>Start</strong> button while the top-most <strong>Test-suite</strong> node
is selected).</p>
</li>
<li><p class="first">Depending on the parameters set one or more test-sets will be executed. Each
test-set corresponds to one project with one configuration and consists of 3
test-cases: <code class="docutils literal"><span class="pre">build</span></code>, <code class="docutils literal"><span class="pre">setDebugSettings</span></code> and <code class="docutils literal"><span class="pre">debug</span></code>. If one of these test-cases
fails, following test-cases will not be executed.</p>
</li>
<li><p class="first">After test run is finished, you can see the results in the bottom right
corner of the Qf-Test window, where numbers of successful, failed and skipped
tests are shown. You can also see the run-log by pressing <code class="docutils literal"><span class="pre">Ctrl+L</span></code> or choosing
the test-suite at the bottom of the &#8220;Run&#8221; menu. In the run-log window you can
choose &#8220;File/Create HTML/XML report&#8221;, then accept default options and see the
generated HTML report in your browser.</p>
</li>
</ol>
</div>
<div class="section" id="setting-test-suite-parameters">
<h2><a class="toc-backref" href="#id3">Setting test-suite parameters</a><a class="headerlink" href="#setting-test-suite-parameters" title="Permalink to this headline">¶</a></h2>
<p>Select the top-most <strong>Test-suite</strong> node of your test-suite. On the right side of
the Qf-Test window information about the test-suite will appear. In the variable
definitions section test-suite parameters are listed. Required fields are</p>
<ul>
<li><p class="first"><strong>board</strong> - available values are: <cite>nsim</cite>, <cite>emsk1.1</cite>, <cite>emsk2.2</cite>, <cite>axs101</cite> and
<cite>axs103</cite>.</p>
<p>In case selected board is not <cite>nsim</cite>, you have to specify
* <strong>gdbServer</strong>: <cite>openocd</cite> or <cite>ashling</cite>;
* <strong>core</strong>. Here is a table of available cores:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="26%" />
<col width="29%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">emsk1.1</th>
<th class="head">emsk2.2</th>
<th class="head">axs101</th>
<th class="head">axs103</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>em4</td>
<td>em7d</td>
<td>arc600#1</td>
<td>hs36</td>
</tr>
<tr class="row-odd"><td>em6</td>
<td>em9d</td>
<td>arc600#2</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>em11d</td>
<td>em6</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
<td>arc700</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><strong>eclipsedir</strong>  - directory with the eclipse that will be tested;</p>
</li>
<li><p class="first"><strong>workspace</strong> - workspace for eclipse to use for test projects.</p>
</li>
</ul>
<div class="section" id="optional-fields-for-all-tests">
<h3><a class="toc-backref" href="#id4">Optional fields for all tests:</a><a class="headerlink" href="#optional-fields-for-all-tests" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>language</strong> - either <cite>c</cite>, <cite>c++</cite> or may be left blank. If blank, both
languages will be tested.</li>
<li><strong>mode</strong> - <cite>build</cite> or <cite>debug</cite>. If left blank, the value is considered as
<cite>debug</cite>. <cite>Build</cite> mode only tests that projects can be built and no problems
are detected. In <cite>debug</cite> mode it is tested that projects that are built
successfully can be run and output is checked.</li>
<li><strong>ignoreProblems</strong>: <cite>true</cite> or <cite>false</cite>. Normally if project is not built or
some problems are detected (and shown on the &#8220;Problems&#8221; tab in Eclipse), we
do not try to run it. But if you set <strong>ignoreProblems</strong> = <cite>true</cite>, project will
be run even if there are problems on the &#8220;Problems&#8221; tab (but not if project is
not built). However, if there are problems detected, the <code class="docutils literal"><span class="pre">build</span></code> test-case
will be considered as failed even if <strong>ignoreProblems</strong> is set. Default value &#8211;
<cite>false</cite>.</li>
<li><strong>configuration</strong> - <cite>Debug</cite>, <cite>Release</cite>. By default, every created project
has two build configurations - <cite>Debug</cite> and <cite>Release</cite>. Choose which of these
configurations you want to test.  If left blank, both these configurations will
be run.</li>
</ul>
</div>
<div class="section" id="nsim-parameters">
<h3><a class="toc-backref" href="#id5">nSIM parameters</a><a class="headerlink" href="#nsim-parameters" title="Permalink to this headline">¶</a></h3>
<p>To run nSIM tests you need to specify</p>
<ul class="simple">
<li><strong>nsimdrv</strong> - nsim executable file with full path;</li>
</ul>
<p>Optional fields for nSIM:</p>
<ul class="simple">
<li><strong>toolchain</strong>: one of <em>em</em>, <em>hs</em>, <em>600</em> and <em>700</em>. If blank, projects for all
of the toolchains will be tested;</li>
<li><strong>endian</strong>: <em>little</em>, <em>big</em>. If blank, both endianness&#8217; projects are run;</li>
<li><strong>tcf</strong>. If you specify TCF, project will be tested only on this TCF, but in
this case you have to specify toolchain and endianness as well. This TCF will
be taken from the directory <code class="docutils literal"><span class="pre">tcf/toolchain/endian/</span></code> relative to the test suite
location, so the available values are the names of files in this directory
(without extension).</li>
</ul>
</div>
<div class="section" id="emsk-and-axs10x-parameters-optional">
<h3><a class="toc-backref" href="#id6">EMSK and AXS10x parameters (optional)</a><a class="headerlink" href="#emsk-and-axs10x-parameters-optional" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>template</strong> - for EMSK there are &#8220;Hello World&#8221; and empty templates
available. You can choose the template to be tested by setting <strong>template</strong>
equal to <em>hello</em> or <em>empty</em>. If left blank, both templates will be used
(if this field is left blank then some tests fail, because memory_error
appears before main and exit when debugging, it happens for unknown reasons,
so a template field needs to be filled now).</li>
<li><strong>mcpu</strong> - mcpu flag to be passed to compiler. For ARC 600 there is only one
mcpu value: <code class="docutils literal"><span class="pre">arc600</span></code>, for ARC 700 - <code class="docutils literal"><span class="pre">arc700</span></code>. For ARC EM values are: <code class="docutils literal"><span class="pre">em</span></code>,
<code class="docutils literal"><span class="pre">arcem</span></code>, <code class="docutils literal"><span class="pre">em4</span></code>, <code class="docutils literal"><span class="pre">em4_dmips</span></code>, <code class="docutils literal"><span class="pre">em4_fpus</span></code> and <code class="docutils literal"><span class="pre">em4_fpuda</span></code>, for ARC HS: <code class="docutils literal"><span class="pre">hs</span></code>,
<code class="docutils literal"><span class="pre">archs</span></code>, <code class="docutils literal"><span class="pre">hs34</span></code>, <code class="docutils literal"><span class="pre">hs38</span></code>, <code class="docutils literal"><span class="pre">hs38_linux</span></code>.</li>
</ul>
<p>However, if using this option, you have to be careful since not all of the
options are applicable to all of the cores that can be used. For every project
template and every board and core there is a list of mcpu values that will be
run if this field is left blank. Usually there are only one of two values in
these lists. For example, &#8220;Hello World for EMSK 1.1 Project&#8221; on EM4 will be run
only using <cite>em4_dmips</cite> mcpu value, but &#8220;Empty Project for EM4&#8221; will use <cite>em4</cite>
and <cite>em4_dmips</cite>.</p>
<p>The lists of the mcpu values to be used by default can be found in the
&#8220;template&#8221; data table of the top-most &#8220;debug&#8221; test-set&#8217;s data driver.</p>
</div>
<div class="section" id="openocd-and-ashling-parameters">
<h3><a class="toc-backref" href="#id7">OpenOCD and Ashling parameters</a><a class="headerlink" href="#openocd-and-ashling-parameters" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>openocd</strong> - OpenOCD executable file with full path;</li>
<li><strong>ashlingBinPath</strong> - Ashling executable with full path;</li>
<li><strong>ashlingXmlDir</strong> - directory containing XML target description files and
arc-reg-files;</li>
<li><strong>comPort</strong> - on Windows if you want to check UART output, you have to
specify the COM port of your connected board from &#8220;Devices and Printers&#8221;
dialog. Use only the number, without the &#8220;COM&#8221; prefix. For example, if your
&#8220;Devices and Printers&#8221; shows &#8220;COM5&#8221;, put &#8220;5&#8221; in this field. If left blank,
output just will not be checked.</li>
</ul>
</div>
<div class="section" id="other-parameters">
<h3><a class="toc-backref" href="#id8">Other parameters</a><a class="headerlink" href="#other-parameters" title="Permalink to this headline">¶</a></h3>
<p>There are <strong>sourceFileDir</strong>, <strong>sourceFile</strong>, <strong>tcfDir</strong> and <strong>client</strong>
parameters with default values set in the variable definitions section of
test-suite. There is no need to override these values from test run to test run,
but <strong>tcfDir</strong> and <strong>sourceFileDir</strong> should point to <code class="docutils literal"><span class="pre">tcf/</span></code> and <code class="docutils literal"><span class="pre">src/</span></code>
directories respectively (relative to test-suite location) and <strong>sourceFile</strong>
should contain the name of the file to be used as source file for empty
projects.</p>
<p>Variable <strong>client</strong> is qf-test internal and can be set to any value.</p>
</div>
</div>
<div class="section" id="launching-test-suite-from-command-line">
<h2><a class="toc-backref" href="#id9">Launching test-suite from command line</a><a class="headerlink" href="#launching-test-suite-from-command-line" title="Permalink to this headline">¶</a></h2>
<p>There is a command that can be used to run test-suite from command line:</p>
<p><code class="docutils literal"><span class="pre">qftest</span> <span class="pre">-batch</span> <span class="pre">-variable</span> <span class="pre">&lt;NAME&gt;=&lt;VALUE&gt;</span> <span class="pre">arc_gnu_ide_tests.qft</span></code></p>
<p>All the variables needed for the test execution should be set to appropriate
values here or in the test-suite &#8220;Variable definitions&#8221; section. Values set from
command line override the values set in the test-suite.</p>
<p>There are other parameters for command line qf-test execution, see &#8220;Test
execution&#8221; chapter of Qf-Test manual.</p>
</div>
<div class="section" id="known-problems-and-how-to-fix-them">
<h2><a class="toc-backref" href="#id10">Known problems and how to fix them</a><a class="headerlink" href="#known-problems-and-how-to-fix-them" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>It has been noticed that sometimes Eclipse stops recognizing some components.
For example, there might be a sequence that starts debug session, with
<code class="docutils literal"><span class="pre">waitForComponent()</span></code> procedure in the middle of it that fails with
<code class="docutils literal"><span class="pre">ComponentNotFound</span></code> exception, but you can see that this component in fact
appeared in Eclipse. I&#8217;m not sure why this happens, but setting a breakpoint on
the failing node, waiting for the component to appear and recording this component
again (press <strong>Start recording</strong> button, mouse click on the component, then stop
recording and see the result in the &#8220;Extras&#8221; section) and replacing the old
component with the new one fixes the problem.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that after component is recorded it often needs to be edited. Open
&#8220;Extras&#8221; section, choose the command that uses the component, then press
<code class="docutils literal"><span class="pre">Ctrl+W</span></code> to locate component in the &#8220;Windows and components&#8221; section. It often
helps to delete all the information from the &#8220;Structure&#8221; and &#8220;Geometry&#8221;
sections of the component information. Also it might be necessary to edit
&#8220;Feature&#8221; and &#8220;Extra features&#8221; sections, so that this component would be
recognized for projects with names different from the name of the project you
were testing when recorded this component.</p>
</div>
<ul class="simple">
<li>Another thing that might cause questions is that when qf-test checks UART
&#8220;Hello World&#8221; output, it uses an image instead of text, so the &#8220;Hello World&#8221;
might be there, but the image might not be the same. It&#8217;s impossible to check
text here because apparently Terminal view shows an image, so I&#8217;d suggest user
should just record his image and replace the old image in test-suite with his new
one and run the tests against it. Another solution is to just check in run-log that
every time <code class="docutils literal"><span class="pre">Check</span> <span class="pre">image</span></code> procedure failed, there in fact was &#8220;Hello World&#8221; in
Terminal view (Qf-Test provides screenshots of Eclipse window at the times
exceptions occur, they are available in run-log).</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../maintainer/index.html" class="btn btn-neutral float-right" title="Information for Toolchain maintainers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="how-to-run-embarc-project.html" class="btn btn-neutral" title="How to Run embARC Projects" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2017, Synopsys.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2017.03',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>